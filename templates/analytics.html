<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Silent Disco - Analytics</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Audiowide&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
    <style>
        :root {
            --vinyl-black: #1a1a1a;
            --vinyl-dark: #2d2d2d;
            --warm-brown: #5d4e37;
            --vintage-orange: #ff8c42;
            --vintage-red: #d64933;
            --warm-cream: #f4e8d8;
            --gold: #d4af37;
            --success-green: #4caf50;
            --error-red: #f44336;
            --spacing-xs: 0.3rem;
            --spacing-sm: 0.6rem;
            --spacing-md: 0.9rem;
            --spacing-lg: 1.2rem;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Audiowide', 'Orbitron', sans-serif;
            background: linear-gradient(135deg, var(--vinyl-black) 0%, var(--vinyl-dark) 100%);
            color: var(--warm-cream);
            min-height: 100vh;
            padding: var(--spacing-sm);
            max-width: 1300px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: var(--spacing-md);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-lg);
        }

        .header h1 {
            font-size: 1.6rem;
            color: var(--vintage-orange);
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.5);
            letter-spacing: 0.1em;
        }

        .nav-link {
            font-size: 0.85rem;
            color: var(--gold);
            text-decoration: none;
            padding: var(--spacing-xs) var(--spacing-sm);
            border: 1px solid var(--gold);
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            background: rgba(212, 175, 55, 0.15);
            color: var(--warm-cream);
        }

        /* Stats Cards */
        .stats-row {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-md);
        }

        .stat-card {
            background: linear-gradient(145deg, var(--warm-brown) 0%, var(--vinyl-dark) 100%);
            padding: var(--spacing-md);
            border-radius: 12px;
            border: 2px solid var(--gold);
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--vintage-orange);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .stat-label {
            font-size: 0.7rem;
            color: var(--warm-cream);
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-top: var(--spacing-xs);
        }

        /* Grid Rows */
        .grid-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-sm);
        }

        /* Cards */
        .card {
            background: linear-gradient(145deg, var(--vinyl-dark) 0%, var(--vinyl-black) 100%);
            padding: var(--spacing-md);
            border-radius: 12px;
            border: 2px solid var(--warm-brown);
        }

        .card-title {
            font-size: 0.9rem;
            color: var(--gold);
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin-bottom: var(--spacing-md);
            border-bottom: 2px solid var(--warm-brown);
            padding-bottom: var(--spacing-sm);
        }

        /* Chart containers */
        .chart-container {
            position: relative;
            height: 220px;
        }

        .chart-container-small {
            position: relative;
            height: 180px;
            max-width: 180px;
            margin: 0 auto;
        }

        /* Top Songs List */
        .song-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-xs) 0;
            border-bottom: 1px solid rgba(93, 78, 55, 0.3);
        }

        .song-item:last-child { border-bottom: none; }

        .song-rank {
            font-size: 0.85rem;
            color: var(--gold);
            width: 20px;
            text-align: center;
            flex-shrink: 0;
        }

        .song-art {
            width: 36px;
            height: 36px;
            border-radius: 4px;
            flex-shrink: 0;
            background: var(--vinyl-black);
        }

        .song-art img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 4px;
        }

        .song-info {
            flex: 1;
            min-width: 0;
        }

        .song-name {
            font-size: 0.8rem;
            color: var(--warm-cream);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .song-artist {
            font-size: 0.7rem;
            color: var(--vintage-orange);
            font-style: italic;
        }

        .song-count {
            font-size: 0.8rem;
            color: var(--gold);
            flex-shrink: 0;
        }

        /* Album Art Wall */
        .art-wall {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 6px;
        }

        .art-wall img {
            width: 100%;
            aspect-ratio: 1;
            object-fit: cover;
            border-radius: 6px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .art-wall img:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 20px rgba(255, 140, 66, 0.4);
            z-index: 1;
            position: relative;
        }

        /* Session Table */
        .session-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.75rem;
        }

        .session-table th {
            color: var(--gold);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            padding: var(--spacing-xs) var(--spacing-sm);
            border-bottom: 2px solid var(--warm-brown);
            text-align: left;
        }

        .session-table td {
            padding: var(--spacing-xs) var(--spacing-sm);
            border-bottom: 1px solid rgba(93, 78, 55, 0.2);
            color: var(--warm-cream);
        }

        .session-table tr:hover td {
            background: rgba(93, 78, 55, 0.2);
        }

        /* Recognition stats legend */
        .legend {
            display: flex;
            justify-content: center;
            gap: var(--spacing-md);
            margin-top: var(--spacing-sm);
            font-size: 0.7rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .legend-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        /* Responsive */
        @media (max-width: 900px) {
            .stats-row { grid-template-columns: repeat(2, 1fr); }
            .grid-row { grid-template-columns: 1fr; }
            .art-wall { grid-template-columns: repeat(4, 1fr); }
        }
    </style>
</head>
<body>
    <!-- HEADER -->
    <div class="header">
        <a href="/" class="nav-link">Back to Main</a>
        <h1>SILENT DISCO - Analytics</h1>
        <a href="#" class="nav-link" onclick="location.reload()">Refresh</a>
    </div>

    <!-- STATS CARDS -->
    <div class="stats-row">
        <div class="stat-card">
            <div class="stat-value">247</div>
            <div class="stat-label">Total Snippets</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">78%</div>
            <div class="stat-label">Recognition Rate</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">142</div>
            <div class="stat-label">Songs Played</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">18</div>
            <div class="stat-label">Sessions</div>
        </div>
    </div>

    <!-- ROW 1: Top Artists + Top Songs -->
    <div class="grid-row">
        <div class="card">
            <div class="card-title">Top Artists</div>
            <div class="chart-container">
                <canvas id="topArtistsChart"></canvas>
            </div>
        </div>
        <div class="card">
            <div class="card-title">Top Songs</div>
            <div class="song-item">
                <span class="song-rank">1</span>
                <div class="song-art"><img src="https://i.scdn.co/image/ab67616d00004851c9bdd59ff7e2d2a2e tried48e67d" alt="" onerror="this.parentElement.textContent='ðŸŽµ'"></div>
                <div class="song-info">
                    <div class="song-name">Blue in Green</div>
                    <div class="song-artist">Miles Davis</div>
                </div>
                <span class="song-count">12x</span>
            </div>
            <div class="song-item">
                <span class="song-rank">2</span>
                <div class="song-art">ðŸŽµ</div>
                <div class="song-info">
                    <div class="song-name">So What</div>
                    <div class="song-artist">Miles Davis</div>
                </div>
                <span class="song-count">9x</span>
            </div>
            <div class="song-item">
                <span class="song-rank">3</span>
                <div class="song-art">ðŸŽµ</div>
                <div class="song-info">
                    <div class="song-name">Take Five</div>
                    <div class="song-artist">Dave Brubeck</div>
                </div>
                <span class="song-count">7x</span>
            </div>
            <div class="song-item">
                <span class="song-rank">4</span>
                <div class="song-art">ðŸŽµ</div>
                <div class="song-info">
                    <div class="song-name">My Favorite Things</div>
                    <div class="song-artist">John Coltrane</div>
                </div>
                <span class="song-count">6x</span>
            </div>
            <div class="song-item">
                <span class="song-rank">5</span>
                <div class="song-art">ðŸŽµ</div>
                <div class="song-info">
                    <div class="song-name">Round Midnight</div>
                    <div class="song-artist">Thelonious Monk</div>
                </div>
                <span class="song-count">5x</span>
            </div>
            <div class="song-item">
                <span class="song-rank">6</span>
                <div class="song-art">ðŸŽµ</div>
                <div class="song-info">
                    <div class="song-name">Autumn Leaves</div>
                    <div class="song-artist">Bill Evans</div>
                </div>
                <span class="song-count">4x</span>
            </div>
            <div class="song-item">
                <span class="song-rank">7</span>
                <div class="song-art">ðŸŽµ</div>
                <div class="song-info">
                    <div class="song-name">A Love Supreme</div>
                    <div class="song-artist">John Coltrane</div>
                </div>
                <span class="song-count">4x</span>
            </div>
        </div>
    </div>

    <!-- ROW 2: Listening by Hour + Day -->
    <div class="grid-row">
        <div class="card">
            <div class="card-title">Listening by Hour</div>
            <div class="chart-container">
                <canvas id="hourChart"></canvas>
            </div>
        </div>
        <div class="card">
            <div class="card-title">Listening by Day</div>
            <div class="chart-container">
                <canvas id="dayChart"></canvas>
            </div>
        </div>
    </div>

    <!-- ROW 3: Recognition Stats + Album Art Wall -->
    <div class="grid-row">
        <div class="card">
            <div class="card-title">Recognition Breakdown</div>
            <div class="chart-container-small">
                <canvas id="recognitionChart"></canvas>
            </div>
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-dot" style="background: #4caf50;"></div>
                    <span>Recognized (78%)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot" style="background: #ff8c42;"></div>
                    <span>Unrecognized (18%)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot" style="background: #f44336;"></div>
                    <span>Failed (4%)</span>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-title">Album Art Wall</div>
            <div class="art-wall">
                <img src="https://i.scdn.co/image/ab67616d00004851e8b066f70c206551210d902b" alt="Album" onerror="this.style.background='var(--warm-brown)'">
                <img src="https://i.scdn.co/image/ab67616d00004851b7a3449e66c12448b93aef13" alt="Album" onerror="this.style.background='var(--vintage-orange)'">
                <img src="https://i.scdn.co/image/ab67616d000048514b3f03b5c tried8f0b7b0e" alt="Album" onerror="this.style.background='var(--gold)'">
                <img src="https://i.scdn.co/image/ab67616d00004851d4daf28d55fe4197234b97f9" alt="Album" onerror="this.style.background='var(--vintage-red)'">
                <img src="https://i.scdn.co/image/ab67616d000048516c7112082b63beefffe6ac6f" alt="Album" onerror="this.style.background='var(--warm-brown)'">
                <img src="https://i.scdn.co/image/ab67616d00004851a7bf730a1b3b8a0c4f3c8f5c" alt="Album" onerror="this.style.background='var(--vintage-orange)'">
                <img src="https://i.scdn.co/image/ab67616d00004851b5e1cc6e9df2e4f3a5ee4e7d" alt="Album" onerror="this.style.background='var(--gold)'">
                <img src="https://i.scdn.co/image/ab67616d000048519e495fb707973f3768008b8c" alt="Album" onerror="this.style.background='var(--vintage-red)'">
                <img src="https://i.scdn.co/image/ab67616d00004851f7db43292a6a99b21b51d5b4" alt="Album" onerror="this.style.background='var(--warm-brown)'">
                <img src="https://i.scdn.co/image/ab67616d00004851c5d7d6c8c3e4f5a6b7c8d9e0" alt="Album" onerror="this.style.background='var(--vintage-orange)'">
            </div>
        </div>
    </div>

    <!-- SESSION HISTORY -->
    <div class="card" style="margin-bottom: var(--spacing-md);">
        <div class="card-title">Session History</div>
        <table class="session-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Duration</th>
                    <th>Snippets</th>
                    <th>Recognized</th>
                    <th>Played</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Feb 15, 2026 8:00 PM</td>
                    <td>2h 15m</td>
                    <td>32</td>
                    <td>28</td>
                    <td>22</td>
                </tr>
                <tr>
                    <td>Feb 14, 2026 7:30 PM</td>
                    <td>1h 45m</td>
                    <td>24</td>
                    <td>19</td>
                    <td>16</td>
                </tr>
                <tr>
                    <td>Feb 12, 2026 9:00 PM</td>
                    <td>3h 10m</td>
                    <td>48</td>
                    <td>41</td>
                    <td>35</td>
                </tr>
                <tr>
                    <td>Feb 10, 2026 6:15 PM</td>
                    <td>1h 20m</td>
                    <td>18</td>
                    <td>14</td>
                    <td>11</td>
                </tr>
                <tr>
                    <td>Feb 8, 2026 8:45 PM</td>
                    <td>2h 30m</td>
                    <td>38</td>
                    <td>30</td>
                    <td>24</td>
                </tr>
            </tbody>
        </table>
    </div>

    <script>
        // Chart.js global config for retro theme
        Chart.defaults.color = '#f4e8d8';
        Chart.defaults.font.family = "'Audiowide', 'Orbitron', sans-serif";
        Chart.defaults.font.size = 10;

        // Top Artists - Horizontal Bar
        new Chart(document.getElementById('topArtistsChart'), {
            type: 'bar',
            data: {
                labels: ['Miles Davis', 'John Coltrane', 'Dave Brubeck', 'Thelonious Monk', 'Bill Evans', 'Charles Mingus', 'Art Blakey'],
                datasets: [{
                    data: [21, 10, 7, 5, 4, 3, 2],
                    backgroundColor: [
                        '#ff8c42', '#d4af37', '#d64933', '#ff8c42', '#d4af37', '#d64933', '#ff8c42'
                    ],
                    borderRadius: 4,
                    borderSkipped: false
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    x: {
                        grid: { color: 'rgba(93, 78, 55, 0.3)' },
                        ticks: { stepSize: 5 }
                    },
                    y: {
                        grid: { display: false }
                    }
                }
            }
        });

        // Listening by Hour
        new Chart(document.getElementById('hourChart'), {
            type: 'bar',
            data: {
                labels: Array.from({length: 24}, (_, i) => `${i}:00`),
                datasets: [{
                    data: [0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 5, 4, 3, 2, 4, 5, 8, 12, 18, 24, 22, 15, 8, 2],
                    backgroundColor: '#ff8c42',
                    borderRadius: 2,
                    borderSkipped: false
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    x: {
                        grid: { display: false },
                        ticks: {
                            callback: function(val, idx) { return idx % 4 === 0 ? this.getLabelForValue(val) : ''; }
                        }
                    },
                    y: {
                        grid: { color: 'rgba(93, 78, 55, 0.3)' },
                        beginAtZero: true
                    }
                }
            }
        });

        // Listening by Day
        new Chart(document.getElementById('dayChart'), {
            type: 'bar',
            data: {
                labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                datasets: [{
                    data: [12, 8, 15, 10, 28, 42, 35],
                    backgroundColor: '#d4af37',
                    borderRadius: 4,
                    borderSkipped: false
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    x: { grid: { display: false } },
                    y: {
                        grid: { color: 'rgba(93, 78, 55, 0.3)' },
                        beginAtZero: true
                    }
                }
            }
        });

        // Recognition Breakdown - Donut
        new Chart(document.getElementById('recognitionChart'), {
            type: 'doughnut',
            data: {
                labels: ['Recognized', 'Unrecognized', 'Failed'],
                datasets: [{
                    data: [193, 44, 10],
                    backgroundColor: ['#4caf50', '#ff8c42', '#f44336'],
                    borderColor: '#1a1a1a',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '60%',
                plugins: { legend: { display: false } }
            }
        });
    </script>
</body>
</html>
